function lazyLoad(){$(".lazy").Lazy({effect:"fadeIn",effectTime:300})}function hide_show_content(){let e=$(".game-description").outerHeight();e<=739?($(".show_content").css({display:"none"}),$(".game-description").attr("style","height:unset")):($(".game-description").attr("style","height:740px;overflow:hidden"),$(".show_content").css({display:"flex"}),$(".ShowMore_button").addClass("more"),$(".content-inner").css({"padding-bottom":"50px"})),$(".ShowMore_button").click(function(){$(".ShowMore_button").hasClass("more")?($(".ShowMore_button").removeClass("more"),$(".game-description").animate({height:e+"px",overflow:"hidden",animation:"height 1000ms ease 0ms"},{easing:"swing",complete:function(){$(".game-description").attr("style","height:auto"),$(".ShowMore_button").html('Show less <span class="svg-icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-keyboard_arrow_up"></use> </svg></span>'),$(".ShowMore_button").addClass("less")}})):($(".ShowMore_button").removeClass("less"),$(".game-description").animate({height:"740px",overflow:"hidden",animation:"height 1000ms ease 0ms"},{easing:"swing",complete:function(){$(".game-description").attr("style","height:740px;overflow:hidden"),$(".ShowMore_button").html('Show more <span class="svg-icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-keyboard_arrow_down"></use> </svg></span>'),$(".ShowMore_button").addClass("more")}}))})}function copyToClipboard(e,t){var o=$("<input>");$("body").append(o),$(e).select(),document.execCommand("copy"),$(t).html("COPIED!!"),setTimeout(function(){$(t).html("Copy link")},3e3),o.remove()}function readTextFile(e,t){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4===o.readyState&&"200"==o.status&&t(o.responseText)},o.send(null)}function search(e,o){return o=o.toString().toLowerCase(),e.filter(function(t){return Object.keys(t).some(function(e){return-1!==t[e].toString().toLowerCase().indexOf(o)})})}function search_json(){$("input#search_txt").each(function(){0==$(this).val().length&&$("#search_button").attr("disabled","disabled")}),$("input#search_txt").keyup(function(e){var t=$("input#search_txt").val();if(3<=t.length){let e=!1;$("input#search_txt").each(function(){e=0==$(this).val().length}),e?$("#search_button").attr("disabled","disabled"):($("#search_button").attr("disabled",!1),$("#searchModalLabel").html("Result for "+t),readTextFile(game_config.domain_root+"games.json",function(e){e=search(JSON.parse(e),t);0<$(".search-results").find(".search__result_container").length&&$(".search-results").find(".search__result_container").remove();let a='<div class="search__result_container absolute z-50 left-0 right-0 mt-6 rounded-3xl shadow-2xl shadow-[#007b43]/10 dark:shadow-[#007b43]/5 max-h-[60vh] overflow-hidden dark:bg-gray-900/98 backdrop-blur-sm transition-all duration-300 animate-in fade-in slide-in-from-top-2"> <div class="overflow-y-auto max-h-[60vh] [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:bg-[#007b43]/5 dark:[&::-webkit-scrollbar-track]:bg-[#007b43]/10 [&::-webkit-scrollbar-thumb]:bg-[#007b43]/30 dark:[&::-webkit-scrollbar-thumb]:bg-[#007b43]/20 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:rounded-full"> <div class="divide-y divide-[#007b43]/10 dark:divide-[#007b43]/5">';0<e.length?(console.log("result lenght:"+e.length),e.forEach(function(e,t){let o="";o=e.slug===game_config.home_page?"/":"/"+e.slug+".html",a+=`<a href="${o}" class="link_search_complete w-full flex items-center group transition-all duration-300 gap-4 p-2"> <div class="relative flex-shrink-0 rounded overflow-hidden ring-2 ring-[#007b43]/20 transition-all duration-300 w-8 h-8"> <img src="${e.image}" alt="${e.name}" class="object-cover w-full h-full flex-shrink-0 transition-transform duration-500 group-hover:scale-110" loading="lazy"></div> <div class="flex-1 min-w-0 text-left text_search_complete text_color">${e.name}</div> </a>`})):a+=`<div class="p-4 "><h3 class="text-dark">No result for ${t}</h3></div>`,a+="</div></div></div>",$(".search-results").append(a);e=document.getElementById("search_txt");e.addEventListener("focus",function(){document.getElementsByClassName("search__result_container")[0].style.display="block"}),e.addEventListener("focusout",function(){setTimeout(function(){document.getElementsByClassName("search__result_container")[0].style.display="none"},500)}),$("#search_txt").keyup(delay(function(e){$("#search_txt").val().length<3&&($(".search__result_container").css("display","none"),$(".no-result-search").hide())},300))}))}})}function slider_js(){new Swiper(".games-hot-slide .swiper",{slidesPerView:5.5,spaceBetween:18,speed:600,freeMode:!0,navigation:{nextEl:".games-hot-slide .next_btn",prevEl:".games-hot-slide .prev_btn"},draggable:!0,breakpoints:{1386:{slidesPerView:"6",freeMode:!0},1199:{slidesPerView:"5",freeMode:!0},991:{slidesPerView:"4",freeMode:!0},600:{freeMode:!0,slidesPerView:"3"},500:{freeMode:!0,slidesPerView:"2.3"},400:{freeMode:!0,slidesPerView:"2"}}}).on("slideChange",function(){lazyLoad()}),new Swiper(".sliderCategoryList .swiper",{slidesPerView:"auto",spaceBetween:12,speed:600,freeMode:!0,navigation:{nextEl:".sliderCategoryList .next_btn",prevEl:".sliderCategoryList .prev_btn"},draggable:!0});new Swiper(".games-top-week .swiper",{slidesPerView:5.5,spaceBetween:18,speed:600,freeMode:!0,navigation:{nextEl:".games-top-week .next_btn",prevEl:".games-top-week .prev_btn"},draggable:!0,breakpoints:{1386:{slidesPerView:"6",freeMode:!0},1199:{slidesPerView:"5",freeMode:!0},991:{slidesPerView:"4",freeMode:!0},600:{freeMode:!0,slidesPerView:"3"},500:{freeMode:!0,slidesPerView:"2.3"},400:{freeMode:!0,slidesPerView:"2"}}}).on("slideChange",function(){lazyLoad()})}function open_fullscreen(){var e=document.getElementById("game-area");null!=e&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))}function delay(o,a){var s=0;return function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout(function(){o.apply(e,t)},a||0)}}function show_hide_sidebar_mobile(){$(".menu").on("click",function(){$(".sidebar-mobile").css("transform","translateX(0)"),$(".bg-overlay").css("display","block")}),$(".btn-close-sidebar").on("click",function(){$(".sidebar-mobile").css("transform","translateX(-100%)"),$(".bg-overlay").css("display","none")}),$(document).mouseup(function(e){0===$(e.target).closest(".sidebar-mobile").length&&($(".sidebar-mobile").css("transform","translateX(-100%)"),$(".bg-overlay").css("display","none"))})}function menu_sidebar_active(){var e=window.location.pathname;$(".side-nav ul li a").each(function(){$(this).attr("href")==e&&($(this).addClass("active"),$(this).removeClass("text-gray-600 dark:text-gray-300 hover:bg-gradient-to-r hover:from-[#007b43]/5 hover:to-[#4ade80]/5 dark:hover:from-[#007b43]/10 dark:hover:to-[#4ade80]/10"),$(this).addClass("bg-gradient-to-r from-[#007b43] to-[#4ade80]"),$(this).find("span").removeClass("text_color"),$(this).find("span").css("color","white"))})}function open_dialog(){$(".toggleModalBtn").on("click",function(){var e=$(this).data("target"),t=($(this).toggleClass("open"),$(e));$(this).hasClass("open")?($(".toggleModalBtn").removeClass("open"),$(".toggleModalBtn").removeClass("active"),$(this).addClass("open"),$(this).addClass("active"),$(".blur_dialog").removeClass("active"),$(".blur_dialog").find(".game_dialog_container").removeClass("slide-out"),t.addClass("active")):close_dialog(e)}),$(".closeModalBtn").on("click",function(){close_dialog($(this).closest(".blur_dialog"))})}function close_dialog(e){e=$(e).closest(".blur_dialog");$(".toggleModalBtn").removeClass("open"),$(".toggleModalBtn").removeClass("active"),e.removeClass("active")}function add_module(){game_config.url_game&&$.ajax({url:"/add-module.ajax",type:"POST",data:{url_game:game_config.url_game},success:function(e){e&&(e=JSON.parse(e),$("#csrf-token").length&&$("#csrf-token").remove(),$("#gmuid").length&&$("#gmuid").remove(),$("body").append(e.gm_layout),game_vote_load())}})}function event_send_vote(e){let o=$(e).data("game"),t=$(e).data("vote");var a=$("#game_vote_panel").data("url"),s=$("#vote-up"),n=$("#vote-down");let i=$("#up-count"),r=$("#down-count");var s=s.find(".g-footer__button-title_last"),n=n.find(".g-footer__button-title_last"),l=$(e).hasClass("voted"),n=($(".button_vote_game").removeClass("voted"),$(".g-footer__button-title_last").text(""),n.text("Dislike"),s.text("Like"),readFromLocalStorage("voted_game"));let c="";n&&0<n.length&&$.each(n,function(e,t){t.id==o&&(c=t.vote)}),l||($(e).addClass("voted"),$(e).find(".g-footer__button-title_last").text("Remove")),$(e).blur();s=$("#csrf-token").val(),n=$("#gmuid").val();null!=e&&$.ajax({url:"/game-vote.ajax",method:"POST",data:{vote:t,id:o,token:s,gmuid:n,url:a,pre_vote:c},success:function(e){i.text(formatNumber(e.up_count)||0),r.text(formatNumber(e.down_count)||0),$("#csrf-token").val(e.t),game_vote_save(o,t)},error:function(e,t,o){console.error("Error:",o)}})}function game_vote_save(s,n){if(readFromLocalStorage("voted_game")&&""!==s&&""!==n){let o=readFromLocalStorage("voted_game"),a=!1;jQuery.each(o,function(e,t){void 0!==t&&t.id===s&&-1<e&&(t.vote===n&&(a=!0),o.splice(e,1))}),a?saveToLocalStorage("voted_game",JSON.stringify(o)):(o.push({id:s,vote:n}),saveToLocalStorage("voted_game",JSON.stringify(o)))}else{var e=[];e.push({id:s,vote:n}),saveToLocalStorage("voted_game",JSON.stringify(e))}}function game_vote_load(){if(0<$("#game_vote_panel").length){let a=$("#game_vote_panel").data("game"),o=$("#game_vote_panel").data("url"),e=$("#csrf-token").val(),s=$("#vote-up"),n=$("#vote-down"),i=$("#up-count"),r=$("#down-count"),l=s.find(".g-footer__button-title_last"),c=n.find(".g-footer__button-title_last");$.getJSON("/game-vote.ajax",{id:a,token:e,url:o}).done(function(e){i.text(formatNumber(e.up_count)||0),r.text(formatNumber(e.down_count)||0),$("#csrf-token").val(e.t);var t="voted_game";if(readFromLocalStorage(t)){let e=readFromLocalStorage(t),o;0<e.length&&$.each(e,function(e,t){t.id==a&&("like"===(o=t.vote)?(s.addClass("voted"),l.text("Remove"),n.removeClass("voted")):"dislike"===o?(n.addClass("voted"),c.text("Remove"),s.removeClass("voted"),console.log("dislike")):(s.removeClass("voted"),n.removeClass("voted"),c.text("Dislike"),l.text("Like"),console.log("not vote")))})}"yes"===game_config.show_comment&&load_comment(1,10,"newest",o,"#list_comment","f5",e.t)}).fail(function(e,t,o){console.log("Request Failed: "+t+", "+o)})}}function formatNumber(e){if(e<1e3)return e.toString();for(var t=["k","M","B","T"],o=-1,a=e;1e3<=a&&o<t.length-1;)a/=1e3,o++;return a.toFixed(a<10?1:0)+t[o]}function saveToLocalStorage(e,t){t="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,t)}function readFromLocalStorage(t){t=localStorage.getItem(t);if(null===t)return[];try{return JSON.parse(t)}catch(e){return t}}function removeFromLocalStorage(e){localStorage.removeItem(e)}function report_open(e){$(e).toggleClass("active");e=$(e).attr("data-game-name");$("#contact-popup").toggleClass("show"),$("#game_report_name").val(e),$("#game_report_url").val(game_config.url_game)}function report_close(){$("#contact-popup").removeClass("show"),$(".report_bug").removeClass("active")}function submit_form_contact(){function i(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}$('input[name="email_contact"]').on("keyup",function(){var e=$(this).val().trim(),t=$(this).next(".error-message-email");""===e||i(e)?($(this).removeClass("error-field"),t.hide()):($(this).addClass("error-field"),t.text("Please enter a valid email address.").show())}),$("#bugReportForm").on("submit",function(e){e.preventDefault();var t=$(this),e=$('select[name="type_contact"]').val(),o=$("#content_contact").val().trim(),a=$('input[name="email_contact"]').val().trim(),s=!0,n="";e?o?o.length<10?(s=!1,n="Description must be at least 10 characters."):/\S/.test(o)?""===a||i(a)||(s=!1,n="Please enter a valid email."):(s=!1,n="Description cannot be empty."):(s=!1,n="Please describe the bug."):(s=!1,n="Please select an issue type."),s?($(".error_form_contact").hide().text(""),e=new FormData(this),o=$("#csrf-token").val(),a=$("#gmuid").val(),e.append("token",o),e.append("gmuid",a),$.ajax({url:"/feedback.ajax",type:"POST",data:e,processData:!1,contentType:!1,success:function(e){console.log(e),$("#csrf-token").val(e.t),report_close(),t.trigger("reset"),$('input[name="screenshot"]').hide(),notify("Thank you !",2e3,"rt")},error:function(e,t,o){alert("Error submitting bug report: "+o)}})):($(".error_form_contact").show().text(n),n.includes("email")&&$('input[name="email_contact"]').addClass("error-field"))})}function notify(e,t,o="bt"){var a="",e=(a=(a=(a=(a+='<div class="notify-toast" style="position: fixed; bottom: 20px; right: -300px; z-index: 1000;">')+'<div class="toast-content">'+'<div class="content-notify">')+("<span>"+e+"</span>")+"</div>")+"</div>"+"</div>",$(a).appendTo("body"));"rt"===o?e.show().animate({right:"20px"},500).delay(t).animate({right:"-300px"},500,function(){$(this).remove()}):e.css({bottom:"-100px"}).show().animate({bottom:"20px"},500).delay(t).animate({bottom:"-100px"},500,function(){$(this).remove()})}function favorite(e){var t=$(e).data("image"),o=$(e).data("id"),a=$(e).data("slug"),s=$(e).data("name"),n=$(e).data("url"),n=$(e).hasClass("favorited")?(remove_wishlist_cookies(o),$(e).removeClass("favorited"),!0):(save_wishlish_cookies(o,a,t,s,n),$(e).addClass("favorited"),!1);notifical_show(o,s,t,a,n,e)}function notifical_show(e,t,o,a,s,n){var i=(i="")+'<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span>'+`
      <div class="g-footer__button-title">
        <span class="g-footer__button-title_text g-footer__button-title_first"></span>
        <span class="g-footer__button-title_text g-footer__button-title_last">
          ${s?"Add":"Remove"}
        </span>
      </div>
    `;$(n).find(".g-footer__button-title").remove(),$(n).html(i);let r="";r+='<div class="notification-success"> <div class="toastt"> <div class="content_notification"> <div class="icon"><img width="50" height="50" src="'+o+'" class="img-fluid" /></div> <div class="details"> <span>'+(1==s?"Remove":"Add")+" Success</span> <p>"+t+"</p> </div> </div> </div> </div>",$("body").one("click",n,function(){notification(r,1e3)})}function notification(e,t){$(e).appendTo("body").fadeTo(t,1,function(){$(this).fadeTo(1e3,0,function(){$(this).addClass("hide"),$(this).remove()})})}function remove_wishlist_cookies(o){var a;readFromLocalStorage("favorite_game")&&""!==o&&(a=readFromLocalStorage("favorite_game"),jQuery.each(a,function(e,t){a=a.filter(function(e){return void 0!==e}),t.id===o&&-1<e&&a.splice(e,1)}),saveToLocalStorage("favorite_game",JSON.stringify(a)),$(".favorites-add-"+o).removeClass("favorited"),$(".favorites-add-"+o).html('<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span> <div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Add</span> </div>'),load_wishlist_cookies())}function save_wishlish_cookies(e,o,t,a,s){var n,i;readFromLocalStorage("favorite_game")&&""!==o&&""!==t&&""!==e&&""!=a?(n=readFromLocalStorage("favorite_game"),jQuery.each(n,function(e,t){void 0!==t&&t.slug===o&&-1<e&&n.splice(e,1)}),n.push({id:e,slug:o,image:t,name:a,url:s}),10<n.length&&n.shift(),saveToLocalStorage("favorite_game",JSON.stringify(n))):((i=[]).push({id:e,slug:o,image:t,name:a,url:s}),saveToLocalStorage("favorite_game",JSON.stringify(i))),load_wishlist_cookies()}function load_wishlist_cookies(){if(readFromLocalStorage("favorite_game")){let o=readFromLocalStorage("favorite_game"),a="";if(0<o.length){var s="";let e="",t=o.length;e+='<span class="svg-icon svg-icon--heart btn__icon" aria-hidden="true"> <svg class="svg-icon__link"> <use xlink:href="#icon-heart"></use> </svg> </span>';for(var n=t-1;0<=n;n--){var i=o[n];s+='<a href="'+i.url+'" class="thumb-card relative group relative block h-full overflow-hidden rounded-xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-md shadow-lg hover:shadow-2xl transform transition-all duration-300 hover:-translate-y-1.5 will-change-transform"><div class="w-full overflow-hidden"><img src="'+i.image+'" alt="'+i.name+'" sizes="(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw" class="object-cover" loading="lazy" style=""></div><div class="px-2 py-2 title-game"><span class="text-sm md:text-base font-medium text-[#007b43] group-hover:text-[#00a35a] transition-colors duration-300 line-clamp-2">'+i.name+"</span></div></a>",i.slug!==game_config.current_slug||$(".favorites-add-"+i.id).hasClass("favorited")||$(".favorites-add-"+i.id).addClass("favorited")}$(".favorites_btn").hasClass("favorited")?e+='<div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Remove</span> </div>':e+='<div class="g-footer__button-title"> <span class="g-footer__button-title_text g-footer__button-title_first"></span> <span class="g-footer__button-title_text g-footer__button-title_last">Add</span> </div>',$(".favorites_btn").html(e),0<t?($(".badge_number").css("display","flex"),a+='<span class="nav-badge favourites_qty">'+t+"</span>"):$(".badge_number").hide(),0<$(".badge_number").find(".favourites_qty").length&&($(".badge_number").find(".favourites_qty").remove(),$(".badge_number").append(a));""!=s&&jQuery("#favoriteGames").html(s),$(".empty_favorite").hide()}else a+="",$(".badge_number").css("display","none"),jQuery("#favoriteGames").html(""),$(".empty_favorite").show(),$(".empty_favorite").html("<center>No favorite game</center>");jQuery(".favorite-link .count_num").html(a)}else $(".empty_favorite").show(),$(".empty_favorite").html("<center>No favorite game</center>"),jQuery("#favoriteGames").html(""),$(".badge_number").css("display","none")}window.addEventListener("DOMContentLoaded",function(){search_json(),load_wishlist_cookies(),$(".scrollTo").on("click",function(e){e.preventDefault();e=$(this).attr("data-target"),e=$("#"+e);console.log(e),$("html, body").animate({scrollTop:e.offset().top},500,"swing")});var e=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t="ontouchstart"in window||0<navigator.maxTouchPoints,o=(e||t?$("body").addClass("is_mobile"):$("body").removeClass("is_mobile"),$("#button-gotop"));$(window).scroll(function(){300<$(window).scrollTop()?o.addClass("show"):o.removeClass("show")}),o.on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"300")}),lazyLoad(),hide_show_content(),slider_js(),show_hide_sidebar_mobile(),menu_sidebar_active(),open_dialog()}),$(document).on("click",function(e){$(e.target).closest(".blur_dialog").length||$(e.target).closest(".toggleModalBtn").length||$(".blur_dialog.active").each(function(){close_dialog(this)})}),$(document).on("click",".button_vote_game",function(){event_send_vote(this)}),$(document).on("click",function(e){$(e.target).closest("#contact-popup").length||$(e.target).closest(".report_bug").length||report_close()}),$(document).ready(function(){submit_form_contact()});